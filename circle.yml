machine:
  python:
    version: 3.5.2
environment:
  FLASK_CONFIG: 'testing'
dependencies:
  pre:
    - pip install -r requirements.txt
test:
  override:
    - python manage.py tests
deployment:
  staging:
    branch: develop
    commands:
      - git fetch origin
      - git push git@heroku.com:xanadu-bucketlist.git $CIRCLE_SHA1:refs/heads/master
      - heroku run python manage.py db migrate --app xanadu-bucketlist
      - heroku run python manage.py db upgrade --app xanadu-bucketlist
      - heroku ps:scale web=1 --app xanadu-bucketlist
